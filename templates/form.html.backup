<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ action }} Item</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
            min-height: 100vh;
            padding: 40px 20px;
        }
        .form-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .form-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
        }
        .form-body {
            padding: 40px;
        }
        .form-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }
        .required {
            color: #e53e3e;
        }
        select, input {
            appearance: auto;
        }
        .or-divider {
            text-align: center;
            margin: 10px 0;
            color: #718096;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>{{ action }} Item - {{ category|replace('_', ' ')|title }}</h1>
        </div>

        <div class="form-body">
            <form method="POST">
                {% if category == 'trailers' %}
                    <!-- Trailers Form Fields -->
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Length (ft) <span class="required">*</span></label>
                            <select name="length" class="form-select" required onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('length_custom').style.display='block'; document.getElementById('length_custom').focus(); }">
                                <option value="">Select Length</option>
                                {% for length in lengths %}
                                <option value="{{ length }}" {{ 'selected' if item and item[1] == length else '' }}>{{ length }} ft</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Length</option>
                            </select>
                            <input type="number" step="0.1" id="length_custom" name="length" class="form-control mt-2" placeholder="Enter custom length" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Year</label>
                            <select name="year" class="form-select">
                                <option value="">Select Year</option>
                                {% for year in years %}
                                <option value="{{ year }}" {{ 'selected' if item and item[2] == year else '' }}>{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Make <span class="required">*</span></label>
                            <select name="make" class="form-select" required onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('make_custom').style.display='block'; document.getElementById('make_custom').focus(); }">
                                <option value="">Select Make</option>
                                {% for make in makes %}
                                <option value="{{ make }}" {{ 'selected' if item and item[3] == make else '' }}>{{ make }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Make</option>
                            </select>
                            <input type="text" id="make_custom" name="make" class="form-control mt-2" placeholder="Enter custom make" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Type</label>
                            <select name="type" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('type_custom').style.display='block'; document.getElementById('type_custom').focus(); }">
                                <option value="">Select Type</option>
                                {% for type in types %}
                                <option value="{{ type }}" {{ 'selected' if item and item[4] == type else '' }}>{{ type }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Type</option>
                            </select>
                            <input type="text" id="type_custom" name="type" class="form-control mt-2" placeholder="Enter custom type" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Dimensions</label>
                            <select name="dimensions" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('dimensions_custom').style.display='block'; document.getElementById('dimensions_custom').focus(); }">
                                <option value="">Select Dimensions</option>
                                {% for dimension in dimensions %}
                                <option value="{{ dimension }}" {{ 'selected' if item and item[5] == dimension else '' }}>{{ dimension }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Dimensions</option>
                            </select>
                            <input type="text" id="dimensions_custom" name="dimensions" class="form-control mt-2" placeholder="Enter custom dimensions" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Capacity</label>
                            <select name="capacity" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('capacity_custom').style.display='block'; document.getElementById('capacity_custom').focus(); }">
                                <option value="">Select Capacity</option>
                                {% for capacity in capacities %}
                                <option value="{{ capacity }}" {{ 'selected' if item and item[6] == capacity else '' }}>{{ capacity }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Capacity</option>
                            </select>
                            <input type="text" id="capacity_custom" name="capacity" class="form-control mt-2" placeholder="Enter custom capacity" style="display:none;">
                        </div>

                        <div class="col-12">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" rows="3">{{ item[7] if item else '' }}</textarea>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Condition</label>
                            <select name="condition" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('condition_custom').style.display='block'; document.getElementById('condition_custom').focus(); }">
                                <option value="">Select Condition</option>
                                {% for condition in conditions %}
                                <option value="{{ condition }}" {{ 'selected' if item and item[8] == condition else '' }}>{{ condition }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Condition</option>
                            </select>
                            <input type="text" id="condition_custom" name="condition" class="form-control mt-2" placeholder="Enter custom condition" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">VIN <span class="required">*</span></label>
                            <input type="text" name="vin" class="form-control"
                                   value="{{ item[9] if item else '' }}" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Color</label>
                            <select name="color" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('color_custom').style.display='block'; document.getElementById('color_custom').focus(); }">
                                <option value="">Select Color</option>
                                {% for color in colors %}
                                <option value="{{ color }}" {{ 'selected' if item and item[10] == color else '' }}>{{ color }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Color</option>
                            </select>
                            <input type="text" id="color_custom" name="color" class="form-control mt-2" placeholder="Enter custom color" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Hitch Type</label>
                            <select name="hitch_type" class="form-select">
                                <option value="">Select Hitch Type</option>
                                <option value="Gooseneck" {{ 'selected' if item and item[11] == 'Gooseneck' else '' }}>Gooseneck</option>
                                <option value="Bumper-pull" {{ 'selected' if item and item[11] == 'Bumper-pull' else '' }}>Bumper-pull</option>
                            </select>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sell Price</label>
                            <input type="number" step="0.01" name="sell_price" class="form-control"
                                   value="{{ item[12] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Purchase Price</label>
                            <input type="number" step="0.01" name="purchase_price" class="form-control"
                                   value="{{ item[14] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sold</label>
                            <select name="sold" class="form-select">
                                <option value="No" {{ 'selected' if not item or item[13] == 'No' else '' }}>No</option>
                                <option value="YES" {{ 'selected' if item and item[13] == 'YES' else '' }}>YES</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Sold Date</label>
                            <input type="date" name="sold_date" class="form-control"
                                   value="{{ item[16] if item and item|length > 16 else '' }}">
                        </div>
                    </div>

                {% elif category == 'bucket_trucks' %}
                    <!-- Bucket Trucks Form Fields -->
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Year</label>
                            <select name="year" class="form-select">
                                <option value="">Select Year</option>
                                {% for year in years %}
                                <option value="{{ year }}" {{ 'selected' if item and item[1] == year else '' }}>{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Make <span class="required">*</span></label>
                            <select name="make" class="form-select" required onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('make_custom').style.display='block'; document.getElementById('make_custom').focus(); }">
                                <option value="">Select Make</option>
                                {% for make in makes %}
                                <option value="{{ make }}" {{ 'selected' if item and item[2] == make else '' }}>{{ make }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Make</option>
                            </select>
                            <input type="text" id="make_custom" name="make" class="form-control mt-2" placeholder="Enter custom make" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Model</label>
                            <select name="model" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('model_custom').style.display='block'; document.getElementById('model_custom').focus(); }">
                                <option value="">Select Model</option>
                                {% for model in models %}
                                <option value="{{ model }}" {{ 'selected' if item and item[3] == model else '' }}>{{ model }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Model</option>
                            </select>
                            <input type="text" id="model_custom" name="model" class="form-control mt-2" placeholder="Enter custom model" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Boom Height (ft)</label>
                            <input type="number" step="0.1" name="boom_height" class="form-control"
                                   value="{{ item[4] if item else '' }}">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Weight Capacity (lbs)</label>
                            <input type="number" step="0.1" name="weight_capacity" class="form-control"
                                   value="{{ item[5] if item else '' }}">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Engine Type</label>
                            <select name="engine_type" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('engine_custom').style.display='block'; document.getElementById('engine_custom').focus(); }">
                                <option value="">Select Engine Type</option>
                                {% for engine in engine_types %}
                                <option value="{{ engine }}" {{ 'selected' if item and item[6] == engine else '' }}>{{ engine }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Engine</option>
                            </select>
                            <input type="text" id="engine_custom" name="engine_type" class="form-control mt-2" placeholder="Enter custom engine type" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Hours</label>
                            <input type="number" name="hours" class="form-control"
                                   value="{{ item[7] if item else '' }}">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">VIN <span class="required">*</span></label>
                            <input type="text" name="vin" class="form-control"
                                   value="{{ item[8] if item else '' }}" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Condition</label>
                            <select name="condition" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('condition_custom').style.display='block'; document.getElementById('condition_custom').focus(); }">
                                <option value="">Select Condition</option>
                                {% for condition in conditions %}
                                <option value="{{ condition }}" {{ 'selected' if item and item[9] == condition else '' }}>{{ condition }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Condition</option>
                            </select>
                            <input type="text" id="condition_custom" name="condition" class="form-control mt-2" placeholder="Enter custom condition" style="display:none;">
                        </div>

                        <div class="col-12">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" rows="3">{{ item[10] if item else '' }}</textarea>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sell Price</label>
                            <input type="number" step="0.01" name="sell_price" class="form-control"
                                   value="{{ item[11] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Purchase Price</label>
                            <input type="number" step="0.01" name="purchase_price" class="form-control"
                                   value="{{ item[13] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sold</label>
                            <select name="sold" class="form-select">
                                <option value="No" {{ 'selected' if not item or item[12] == 'No' else '' }}>No</option>
                                <option value="YES" {{ 'selected' if item and item[12] == 'YES' else '' }}>YES</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Sold Date</label>
                            <input type="date" name="sold_date" class="form-control"
                                   value="{{ item[15] if item and item|length > 15 else '' }}">
                        </div>
                    </div>

                {% elif category == 'classic_cars' %}
                    <!-- Classic Cars Form Fields -->
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Year</label>
                            <select name="year" class="form-select">
                                <option value="">Select Year</option>
                                {% for year in years %}
                                <option value="{{ year }}" {{ 'selected' if item and item[1] == year else '' }}>{{ year }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Make <span class="required">*</span></label>
                            <select name="make" class="form-select" required onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('make_custom').style.display='block'; document.getElementById('make_custom').focus(); }">
                                <option value="">Select Make</option>
                                {% for make in makes %}
                                <option value="{{ make }}" {{ 'selected' if item and item[2] == make else '' }}>{{ make }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Make</option>
                            </select>
                            <input type="text" id="make_custom" name="make" class="form-control mt-2" placeholder="Enter custom make" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Model</label>
                            <select name="model" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('model_custom').style.display='block'; document.getElementById('model_custom').focus(); }">
                                <option value="">Select Model</option>
                                {% for model in models %}
                                <option value="{{ model }}" {{ 'selected' if item and item[3] == model else '' }}>{{ model }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Model</option>
                            </select>
                            <input type="text" id="model_custom" name="model" class="form-control mt-2" placeholder="Enter custom model" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Mileage</label>
                            <input type="number" name="mileage" class="form-control"
                                   value="{{ item[4] if item else '' }}">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Engine Specs</label>
                            <input type="text" name="engine_specs" class="form-control"
                                   value="{{ item[5] if item else '' }}">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Transmission</label>
                            <select name="transmission" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('transmission_custom').style.display='block'; document.getElementById('transmission_custom').focus(); }">
                                <option value="">Select Transmission</option>
                                {% for transmission in transmissions %}
                                <option value="{{ transmission }}" {{ 'selected' if item and item[6] == transmission else '' }}>{{ transmission }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Transmission</option>
                            </select>
                            <input type="text" id="transmission_custom" name="transmission" class="form-control mt-2" placeholder="Enter custom transmission" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">VIN <span class="required">*</span></label>
                            <input type="text" name="vin" class="form-control"
                                   value="{{ item[7] if item else '' }}" required>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Restoration Status</label>
                            <select name="restoration_status" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('restoration_custom').style.display='block'; document.getElementById('restoration_custom').focus(); }">
                                <option value="">Select Status</option>
                                {% for status in restoration_statuses %}
                                <option value="{{ status }}" {{ 'selected' if item and item[8] == status else '' }}>{{ status }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Status</option>
                            </select>
                            <input type="text" id="restoration_custom" name="restoration_status" class="form-control mt-2" placeholder="Enter custom status" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Condition</label>
                            <select name="condition" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('condition_custom').style.display='block'; document.getElementById('condition_custom').focus(); }">
                                <option value="">Select Condition</option>
                                {% for condition in conditions %}
                                <option value="{{ condition }}" {{ 'selected' if item and item[9] == condition else '' }}>{{ condition }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Condition</option>
                            </select>
                            <input type="text" id="condition_custom" name="condition" class="form-control mt-2" placeholder="Enter custom condition" style="display:none;">
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Color</label>
                            <select name="color" class="form-select" onchange="if(this.value=='custom') { this.style.display='none'; document.getElementById('color_custom').style.display='block'; document.getElementById('color_custom').focus(); }">
                                <option value="">Select Color</option>
                                {% for color in colors %}
                                <option value="{{ color }}" {{ 'selected' if item and item[10] == color else '' }}>{{ color }}</option>
                                {% endfor %}
                                <option value="custom">+ Add Custom Color</option>
                            </select>
                            <input type="text" id="color_custom" name="color" class="form-control mt-2" placeholder="Enter custom color" style="display:none;">
                        </div>

                        <div class="col-12">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" rows="3">{{ item[11] if item else '' }}</textarea>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sell Price</label>
                            <input type="number" step="0.01" name="sell_price" class="form-control"
                                   value="{{ item[12] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Purchase Price</label>
                            <input type="number" step="0.01" name="purchase_price" class="form-control"
                                   value="{{ item[14] if item else '' }}">
                        </div>

                        <div class="col-md-4">
                            <label class="form-label">Sold</label>
                            <select name="sold" class="form-select">
                                <option value="No" {{ 'selected' if not item or item[13] == 'No' else '' }}>No</option>
                                <option value="YES" {{ 'selected' if item and item[13] == 'YES' else '' }}>YES</option>
                            </select>
                        </div>

                        <div class="col-md-6">
                            <label class="form-label">Sold Date</label>
                            <input type="date" name="sold_date" class="form-control"
                                   value="{{ item[16] if item and item|length > 16 else '' }}">
                        </div>
                    </div>
                {% endif %}

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary btn-lg me-2">
                        Submit
                    </button>
                    <a href="/" class="btn btn-secondary btn-lg">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>